"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "instrumentation";
exports.ids = ["instrumentation"];
exports.modules = {

/***/ "(instrument)/./instrumentation.ts":
/*!****************************!*\
  !*** ./instrumentation.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   register: () => (/* binding */ register)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(instrument)/./lib/prisma.ts\");\n\n// 改变导入方式\nasync function register() {\n    if (true) {\n        // 服务器端代码，只在服务器启动时执行一次\n        await initDatabase();\n    }\n}\nasync function initDatabase() {\n    // 数据库初始化逻辑\n    const configs = [\n        {\n            key: 'site_name',\n            value: 'Galgame Club'\n        },\n        {\n            key: 'site_description',\n            value: 'Galgame Club'\n        },\n        {\n            key: 'site_keywords',\n            value: 'Galgame Club'\n        },\n        {\n            key: 'site_logo',\n            value: ''\n        },\n        {\n            key: 'site_favicon',\n            value: ''\n        },\n        {\n            key: 'site_separator',\n            value: ' - '\n        },\n        {\n            key: 'site_tagline',\n            value: 'All the worlds best games'\n        },\n        {\n            key: 'site_footer',\n            value: ''\n        },\n        {\n            key: 'mail_host',\n            value: ''\n        },\n        {\n            key: 'mail_port',\n            value: ''\n        },\n        {\n            key: 'mail_username',\n            value: ''\n        },\n        {\n            key: 'mail_password',\n            value: ''\n        },\n        {\n            key: 'mail_from',\n            value: ''\n        },\n        {\n            key: 'mail_from_name',\n            value: ''\n        },\n        {\n            key: 'storage_type',\n            value: 'local'\n        },\n        {\n            key: 'storage_path',\n            value: ''\n        },\n        {\n            key: 's3_bucket',\n            value: ''\n        },\n        {\n            key: 's3_region',\n            value: ''\n        },\n        {\n            key: 's3_access_key',\n            value: ''\n        },\n        {\n            key: 's3_secret_key',\n            value: ''\n        },\n        {\n            key: 's3_endpoint',\n            value: ''\n        },\n        {\n            key: 's3_force_path_style',\n            value: 'false'\n        },\n        {\n            key: 's3_cdn',\n            value: ''\n        }\n    ];\n    // 批量查询已存在的配置\n    const existingConfigs = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].config.findMany({\n        where: {\n            key: {\n                in: configs.map((c)=>c.key)\n            }\n        }\n    });\n    const existingKeys = new Set(existingConfigs.map((c)=>c.key));\n    // 只创建不存在的配置\n    const newConfigs = configs.filter((c)=>!existingKeys.has(c.key));\n    if (newConfigs.length > 0) {\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].config.createMany({\n            data: newConfigs\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGluc3RydW1lbnQpLy4vaW5zdHJ1bWVudGF0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtDO0FBQ2xDLFNBQVM7QUFDRixlQUFlQztJQUNwQixJQUFJQyxJQUFxQyxFQUFFO1FBQ3pDLHNCQUFzQjtRQUN0QixNQUFNRztJQUVSO0FBQ0Y7QUFFQSxlQUFlQTtJQUNiLFdBQVc7SUFDWCxNQUFNQyxVQUFVO1FBQ2Q7WUFBRUMsS0FBSztZQUFhQyxPQUFPO1FBQWU7UUFDMUM7WUFBRUQsS0FBSztZQUFvQkMsT0FBTztRQUFlO1FBQ2pEO1lBQUVELEtBQUs7WUFBaUJDLE9BQU87UUFBZTtRQUM5QztZQUFFRCxLQUFLO1lBQWFDLE9BQU87UUFBRztRQUM5QjtZQUFFRCxLQUFLO1lBQWdCQyxPQUFPO1FBQUc7UUFDakM7WUFBRUQsS0FBSztZQUFrQkMsT0FBTztRQUFNO1FBQ3RDO1lBQUVELEtBQUs7WUFBZ0JDLE9BQU87UUFBNEI7UUFDMUQ7WUFBRUQsS0FBSztZQUFlQyxPQUFPO1FBQUc7UUFDaEM7WUFBRUQsS0FBSztZQUFhQyxPQUFPO1FBQUc7UUFDOUI7WUFBRUQsS0FBSztZQUFhQyxPQUFPO1FBQUc7UUFDOUI7WUFBRUQsS0FBSztZQUFpQkMsT0FBTztRQUFHO1FBQ2xDO1lBQUVELEtBQUs7WUFBaUJDLE9BQU87UUFBRztRQUNsQztZQUFFRCxLQUFLO1lBQWFDLE9BQU87UUFBRztRQUM5QjtZQUFFRCxLQUFLO1lBQWtCQyxPQUFPO1FBQUc7UUFDbkM7WUFBRUQsS0FBSztZQUFnQkMsT0FBTztRQUFRO1FBQ3RDO1lBQUVELEtBQUs7WUFBZ0JDLE9BQU87UUFBRztRQUNqQztZQUFFRCxLQUFLO1lBQWFDLE9BQU87UUFBRztRQUM5QjtZQUFFRCxLQUFLO1lBQWFDLE9BQU87UUFBRztRQUM5QjtZQUFFRCxLQUFLO1lBQWlCQyxPQUFPO1FBQUc7UUFDbEM7WUFBRUQsS0FBSztZQUFpQkMsT0FBTztRQUFHO1FBQ2xDO1lBQUVELEtBQUs7WUFBZUMsT0FBTztRQUFHO1FBQ2hDO1lBQUVELEtBQUs7WUFBdUJDLE9BQU87UUFBUTtRQUM3QztZQUFFRCxLQUFLO1lBQVVDLE9BQU87UUFBRztLQUM1QjtJQUVELGFBQWE7SUFDYixNQUFNQyxrQkFBa0IsTUFBTVQsbURBQU1BLENBQUNVLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDO1FBQ25EQyxPQUFPO1lBQUVMLEtBQUs7Z0JBQUVNLElBQUlQLFFBQVFRLEdBQUcsQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRVIsR0FBRztZQUFFO1FBQUU7SUFDaEQ7SUFDQSxNQUFNUyxlQUFlLElBQUlDLElBQUlSLGdCQUFnQkssR0FBRyxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFUixHQUFHO0lBRTNELFlBQVk7SUFDWixNQUFNVyxhQUFhWixRQUFRYSxNQUFNLENBQUNKLENBQUFBLElBQUssQ0FBQ0MsYUFBYUksR0FBRyxDQUFDTCxFQUFFUixHQUFHO0lBQzlELElBQUlXLFdBQVdHLE1BQU0sR0FBRyxHQUFHO1FBQ3pCLE1BQU1yQixtREFBTUEsQ0FBQ1UsTUFBTSxDQUFDWSxVQUFVLENBQUM7WUFDN0JDLE1BQU1MO1FBQ1I7SUFDRjtBQUdGIiwic291cmNlcyI6WyJDOlxccHJvamVjdFxcZ2FsZ2FtZS1jbHViXFxpbnN0cnVtZW50YXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHByaXNtYSBmcm9tICdAL2xpYi9wcmlzbWEnO1xyXG4vLyDmlLnlj5jlr7zlhaXmlrnlvI9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyKCkge1xyXG4gIGlmIChwcm9jZXNzLmVudi5ORVhUX1JVTlRJTUUgPT09ICdub2RlanMnKSB7XHJcbiAgICAvLyDmnI3liqHlmajnq6/ku6PnoIHvvIzlj6rlnKjmnI3liqHlmajlkK/liqjml7bmiafooYzkuIDmrKFcclxuICAgIGF3YWl0IGluaXREYXRhYmFzZSgpO1xyXG5cclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGluaXREYXRhYmFzZSgpIHtcclxuICAvLyDmlbDmja7lupPliJ3lp4vljJbpgLvovpFcclxuICBjb25zdCBjb25maWdzID0gW1xyXG4gICAgeyBrZXk6ICdzaXRlX25hbWUnLCB2YWx1ZTogJ0dhbGdhbWUgQ2x1YicgfSxcclxuICAgIHsga2V5OiAnc2l0ZV9kZXNjcmlwdGlvbicsIHZhbHVlOiAnR2FsZ2FtZSBDbHViJyB9LFxyXG4gICAgeyBrZXk6ICdzaXRlX2tleXdvcmRzJywgdmFsdWU6ICdHYWxnYW1lIENsdWInIH0sXHJcbiAgICB7IGtleTogJ3NpdGVfbG9nbycsIHZhbHVlOiAnJyB9LFxyXG4gICAgeyBrZXk6ICdzaXRlX2Zhdmljb24nLCB2YWx1ZTogJycgfSxcclxuICAgIHsga2V5OiAnc2l0ZV9zZXBhcmF0b3InLCB2YWx1ZTogJyAtICcgfSxcclxuICAgIHsga2V5OiAnc2l0ZV90YWdsaW5lJywgdmFsdWU6ICdBbGwgdGhlIHdvcmxkcyBiZXN0IGdhbWVzJyB9LFxyXG4gICAgeyBrZXk6ICdzaXRlX2Zvb3RlcicsIHZhbHVlOiAnJyB9LFxyXG4gICAgeyBrZXk6ICdtYWlsX2hvc3QnLCB2YWx1ZTogJycgfSxcclxuICAgIHsga2V5OiAnbWFpbF9wb3J0JywgdmFsdWU6ICcnIH0sXHJcbiAgICB7IGtleTogJ21haWxfdXNlcm5hbWUnLCB2YWx1ZTogJycgfSxcclxuICAgIHsga2V5OiAnbWFpbF9wYXNzd29yZCcsIHZhbHVlOiAnJyB9LFxyXG4gICAgeyBrZXk6ICdtYWlsX2Zyb20nLCB2YWx1ZTogJycgfSxcclxuICAgIHsga2V5OiAnbWFpbF9mcm9tX25hbWUnLCB2YWx1ZTogJycgfSxcclxuICAgIHsga2V5OiAnc3RvcmFnZV90eXBlJywgdmFsdWU6ICdsb2NhbCcgfSxcclxuICAgIHsga2V5OiAnc3RvcmFnZV9wYXRoJywgdmFsdWU6ICcnIH0sXHJcbiAgICB7IGtleTogJ3MzX2J1Y2tldCcsIHZhbHVlOiAnJyB9LFxyXG4gICAgeyBrZXk6ICdzM19yZWdpb24nLCB2YWx1ZTogJycgfSxcclxuICAgIHsga2V5OiAnczNfYWNjZXNzX2tleScsIHZhbHVlOiAnJyB9LFxyXG4gICAgeyBrZXk6ICdzM19zZWNyZXRfa2V5JywgdmFsdWU6ICcnIH0sXHJcbiAgICB7IGtleTogJ3MzX2VuZHBvaW50JywgdmFsdWU6ICcnIH0sXHJcbiAgICB7IGtleTogJ3MzX2ZvcmNlX3BhdGhfc3R5bGUnLCB2YWx1ZTogJ2ZhbHNlJyB9LFxyXG4gICAgeyBrZXk6ICdzM19jZG4nLCB2YWx1ZTogJycgfVxyXG4gIF07XHJcblxyXG4gIC8vIOaJuemHj+afpeivouW3suWtmOWcqOeahOmFjee9rlxyXG4gIGNvbnN0IGV4aXN0aW5nQ29uZmlncyA9IGF3YWl0IHByaXNtYS5jb25maWcuZmluZE1hbnkoe1xyXG4gICAgd2hlcmU6IHsga2V5OiB7IGluOiBjb25maWdzLm1hcChjID0+IGMua2V5KSB9IH1cclxuICB9KTtcclxuICBjb25zdCBleGlzdGluZ0tleXMgPSBuZXcgU2V0KGV4aXN0aW5nQ29uZmlncy5tYXAoYyA9PiBjLmtleSkpO1xyXG5cclxuICAvLyDlj6rliJvlu7rkuI3lrZjlnKjnmoTphY3nva5cclxuICBjb25zdCBuZXdDb25maWdzID0gY29uZmlncy5maWx0ZXIoYyA9PiAhZXhpc3RpbmdLZXlzLmhhcyhjLmtleSkpO1xyXG4gIGlmIChuZXdDb25maWdzLmxlbmd0aCA+IDApIHtcclxuICAgIGF3YWl0IHByaXNtYS5jb25maWcuY3JlYXRlTWFueSh7XHJcbiAgICAgIGRhdGE6IG5ld0NvbmZpZ3NcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG59Il0sIm5hbWVzIjpbInByaXNtYSIsInJlZ2lzdGVyIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUlVOVElNRSIsImluaXREYXRhYmFzZSIsImNvbmZpZ3MiLCJrZXkiLCJ2YWx1ZSIsImV4aXN0aW5nQ29uZmlncyIsImNvbmZpZyIsImZpbmRNYW55Iiwid2hlcmUiLCJpbiIsIm1hcCIsImMiLCJleGlzdGluZ0tleXMiLCJTZXQiLCJuZXdDb25maWdzIiwiZmlsdGVyIiwiaGFzIiwibGVuZ3RoIiwiY3JlYXRlTWFueSIsImRhdGEiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(instrument)/./instrumentation.ts\n");

/***/ }),

/***/ "(instrument)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGluc3RydW1lbnQpLy4vbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFDOUMsTUFBTUMsU0FBUyxJQUFJRCx3REFBWUEsQ0FBQyxDQUNoQztBQUNBLGlFQUFlQyxNQUFNQSxFQUFDIiwic291cmNlcyI6WyJDOlxccHJvamVjdFxcZ2FsZ2FtZS1jbHViXFxsaWJcXHByaXNtYS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XHJcbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoe1xyXG59KVxyXG5leHBvcnQgZGVmYXVsdCBwcmlzbWE7Il0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsInByaXNtYSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(instrument)/./lib/prisma.ts\n");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("./webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(instrument)/./instrumentation.ts"));
module.exports = __webpack_exports__;

})();