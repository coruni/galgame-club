"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "instrumentation";
exports.ids = ["instrumentation"];
exports.modules = {

/***/ "(instrument)/./instrumentation.ts":
/*!****************************!*\
  !*** ./instrumentation.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   register: () => (/* binding */ register)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(instrument)/./lib/prisma.ts\");\n\n// 改变导入方式\nasync function register() {\n    if (true) {\n        // 服务器端代码，只在服务器启动时执行一次\n        await initDatabase();\n    }\n}\nasync function initDatabase() {\n    // 数据库初始化逻辑\n    const configs = [\n        {\n            key: 'site_name',\n            value: 'Galgame Club'\n        },\n        {\n            key: 'site_description',\n            value: 'Galgame Club'\n        },\n        {\n            key: 'site_keywords',\n            value: 'Galgame Club'\n        },\n        {\n            key: 'site_logo',\n            value: ''\n        },\n        {\n            key: 'site_favicon',\n            value: ''\n        },\n        {\n            key: 'site_separator',\n            value: ' - '\n        },\n        {\n            key: 'site_tagline',\n            value: 'All the worlds best games'\n        },\n        {\n            key: 'site_footer',\n            value: ''\n        },\n        {\n            key: 'mail_host',\n            value: ''\n        },\n        {\n            key: 'mail_port',\n            value: ''\n        },\n        {\n            key: 'mail_username',\n            value: ''\n        },\n        {\n            key: 'mail_password',\n            value: ''\n        },\n        {\n            key: 'mail_from',\n            value: ''\n        },\n        {\n            key: 'mail_from_name',\n            value: ''\n        },\n        {\n            key: 'storage_type',\n            value: 'local'\n        },\n        {\n            key: 'storage_path',\n            value: ''\n        },\n        {\n            key: 's3_bucket',\n            value: ''\n        },\n        {\n            key: 's3_region',\n            value: ''\n        },\n        {\n            key: 's3_access_key',\n            value: ''\n        },\n        {\n            key: 's3_secret_key',\n            value: ''\n        },\n        {\n            key: 's3_endpoint',\n            value: ''\n        },\n        {\n            key: 's3_force_path_style',\n            value: 'false'\n        },\n        {\n            key: 's3_cdn',\n            value: ''\n        }\n    ];\n    // 批量查询已存在的配置\n    const existingConfigs = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].config.findMany({\n        where: {\n            key: {\n                in: configs.map((c)=>c.key)\n            }\n        }\n    });\n    const existingKeys = new Set(existingConfigs.map((c)=>c.key));\n    // 只创建不存在的配置\n    const newConfigs = configs.filter((c)=>!existingKeys.has(c.key));\n    if (newConfigs.length > 0) {\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__[\"default\"].config.createMany({\n            data: newConfigs\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGluc3RydW1lbnQpLy4vaW5zdHJ1bWVudGF0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtDO0FBQ2xDLFNBQVM7QUFDRixlQUFlQztJQUNwQixJQUFJQyxJQUFxQyxFQUFFO1FBQ3pDLHNCQUFzQjtRQUN0QixNQUFNRztJQUVSO0FBQ0Y7QUFFQSxlQUFlQTtJQUNiLFdBQVc7SUFDWCxNQUFNQyxVQUFVO1FBQ2Q7WUFBRUMsS0FBSztZQUFhQyxPQUFPO1FBQWU7UUFDMUM7WUFBRUQsS0FBSztZQUFvQkMsT0FBTztRQUFlO1FBQ2pEO1lBQUVELEtBQUs7WUFBaUJDLE9BQU87UUFBZTtRQUM5QztZQUFFRCxLQUFLO1lBQWFDLE9BQU87UUFBRztRQUM5QjtZQUFFRCxLQUFLO1lBQWdCQyxPQUFPO1FBQUc7UUFDakM7WUFBRUQsS0FBSztZQUFrQkMsT0FBTztRQUFNO1FBQ3RDO1lBQUVELEtBQUs7WUFBZ0JDLE9BQU87UUFBNEI7UUFDMUQ7WUFBRUQsS0FBSztZQUFlQyxPQUFPO1FBQUc7UUFDaEM7WUFBRUQsS0FBSztZQUFhQyxPQUFPO1FBQUc7UUFDOUI7WUFBRUQsS0FBSztZQUFhQyxPQUFPO1FBQUc7UUFDOUI7WUFBRUQsS0FBSztZQUFpQkMsT0FBTztRQUFHO1FBQ2xDO1lBQUVELEtBQUs7WUFBaUJDLE9BQU87UUFBRztRQUNsQztZQUFFRCxLQUFLO1lBQWFDLE9BQU87UUFBRztRQUM5QjtZQUFFRCxLQUFLO1lBQWtCQyxPQUFPO1FBQUc7UUFDbkM7WUFBRUQsS0FBSztZQUFnQkMsT0FBTztRQUFRO1FBQ3RDO1lBQUVELEtBQUs7WUFBZ0JDLE9BQU87UUFBRztRQUNqQztZQUFFRCxLQUFLO1lBQWFDLE9BQU87UUFBRztRQUM5QjtZQUFFRCxLQUFLO1lBQWFDLE9BQU87UUFBRztRQUM5QjtZQUFFRCxLQUFLO1lBQWlCQyxPQUFPO1FBQUc7UUFDbEM7WUFBRUQsS0FBSztZQUFpQkMsT0FBTztRQUFHO1FBQ2xDO1lBQUVELEtBQUs7WUFBZUMsT0FBTztRQUFHO1FBQ2hDO1lBQUVELEtBQUs7WUFBdUJDLE9BQU87UUFBUTtRQUM3QztZQUFFRCxLQUFLO1lBQVVDLE9BQU87UUFBRztLQUM1QjtJQUVELGFBQWE7SUFDYixNQUFNQyxrQkFBa0IsTUFBTVQsbURBQU1BLENBQUNVLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDO1FBQ25EQyxPQUFPO1lBQUVMLEtBQUs7Z0JBQUVNLElBQUlQLFFBQVFRLEdBQUcsQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRVIsR0FBRztZQUFFO1FBQUU7SUFDaEQ7SUFDQSxNQUFNUyxlQUFlLElBQUlDLElBQUlSLGdCQUFnQkssR0FBRyxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFUixHQUFHO0lBRTNELFlBQVk7SUFDWixNQUFNVyxhQUFhWixRQUFRYSxNQUFNLENBQUNKLENBQUFBLElBQUssQ0FBQ0MsYUFBYUksR0FBRyxDQUFDTCxFQUFFUixHQUFHO0lBQzlELElBQUlXLFdBQVdHLE1BQU0sR0FBRyxHQUFHO1FBQ3pCLE1BQU1yQixtREFBTUEsQ0FBQ1UsTUFBTSxDQUFDWSxVQUFVLENBQUM7WUFDN0JDLE1BQU1MO1FBQ1I7SUFDRjtBQUdGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEFkbWluaXN0cmF0b3JcXERlc2t0b3BcXGt1bmdhbFxcaW5zdHJ1bWVudGF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwcmlzbWEgZnJvbSAnQC9saWIvcHJpc21hJztcclxuLy8g5pS55Y+Y5a+85YWl5pa55byPXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWdpc3RlcigpIHtcclxuICBpZiAocHJvY2Vzcy5lbnYuTkVYVF9SVU5USU1FID09PSAnbm9kZWpzJykge1xyXG4gICAgLy8g5pyN5Yqh5Zmo56uv5Luj56CB77yM5Y+q5Zyo5pyN5Yqh5Zmo5ZCv5Yqo5pe25omn6KGM5LiA5qyhXHJcbiAgICBhd2FpdCBpbml0RGF0YWJhc2UoKTtcclxuXHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBpbml0RGF0YWJhc2UoKSB7XHJcbiAgLy8g5pWw5o2u5bqT5Yid5aeL5YyW6YC76L6RXHJcbiAgY29uc3QgY29uZmlncyA9IFtcclxuICAgIHsga2V5OiAnc2l0ZV9uYW1lJywgdmFsdWU6ICdHYWxnYW1lIENsdWInIH0sXHJcbiAgICB7IGtleTogJ3NpdGVfZGVzY3JpcHRpb24nLCB2YWx1ZTogJ0dhbGdhbWUgQ2x1YicgfSxcclxuICAgIHsga2V5OiAnc2l0ZV9rZXl3b3JkcycsIHZhbHVlOiAnR2FsZ2FtZSBDbHViJyB9LFxyXG4gICAgeyBrZXk6ICdzaXRlX2xvZ28nLCB2YWx1ZTogJycgfSxcclxuICAgIHsga2V5OiAnc2l0ZV9mYXZpY29uJywgdmFsdWU6ICcnIH0sXHJcbiAgICB7IGtleTogJ3NpdGVfc2VwYXJhdG9yJywgdmFsdWU6ICcgLSAnIH0sXHJcbiAgICB7IGtleTogJ3NpdGVfdGFnbGluZScsIHZhbHVlOiAnQWxsIHRoZSB3b3JsZHMgYmVzdCBnYW1lcycgfSxcclxuICAgIHsga2V5OiAnc2l0ZV9mb290ZXInLCB2YWx1ZTogJycgfSxcclxuICAgIHsga2V5OiAnbWFpbF9ob3N0JywgdmFsdWU6ICcnIH0sXHJcbiAgICB7IGtleTogJ21haWxfcG9ydCcsIHZhbHVlOiAnJyB9LFxyXG4gICAgeyBrZXk6ICdtYWlsX3VzZXJuYW1lJywgdmFsdWU6ICcnIH0sXHJcbiAgICB7IGtleTogJ21haWxfcGFzc3dvcmQnLCB2YWx1ZTogJycgfSxcclxuICAgIHsga2V5OiAnbWFpbF9mcm9tJywgdmFsdWU6ICcnIH0sXHJcbiAgICB7IGtleTogJ21haWxfZnJvbV9uYW1lJywgdmFsdWU6ICcnIH0sXHJcbiAgICB7IGtleTogJ3N0b3JhZ2VfdHlwZScsIHZhbHVlOiAnbG9jYWwnIH0sXHJcbiAgICB7IGtleTogJ3N0b3JhZ2VfcGF0aCcsIHZhbHVlOiAnJyB9LFxyXG4gICAgeyBrZXk6ICdzM19idWNrZXQnLCB2YWx1ZTogJycgfSxcclxuICAgIHsga2V5OiAnczNfcmVnaW9uJywgdmFsdWU6ICcnIH0sXHJcbiAgICB7IGtleTogJ3MzX2FjY2Vzc19rZXknLCB2YWx1ZTogJycgfSxcclxuICAgIHsga2V5OiAnczNfc2VjcmV0X2tleScsIHZhbHVlOiAnJyB9LFxyXG4gICAgeyBrZXk6ICdzM19lbmRwb2ludCcsIHZhbHVlOiAnJyB9LFxyXG4gICAgeyBrZXk6ICdzM19mb3JjZV9wYXRoX3N0eWxlJywgdmFsdWU6ICdmYWxzZScgfSxcclxuICAgIHsga2V5OiAnczNfY2RuJywgdmFsdWU6ICcnIH1cclxuICBdO1xyXG5cclxuICAvLyDmibnph4/mn6Xor6Llt7LlrZjlnKjnmoTphY3nva5cclxuICBjb25zdCBleGlzdGluZ0NvbmZpZ3MgPSBhd2FpdCBwcmlzbWEuY29uZmlnLmZpbmRNYW55KHtcclxuICAgIHdoZXJlOiB7IGtleTogeyBpbjogY29uZmlncy5tYXAoYyA9PiBjLmtleSkgfSB9XHJcbiAgfSk7XHJcbiAgY29uc3QgZXhpc3RpbmdLZXlzID0gbmV3IFNldChleGlzdGluZ0NvbmZpZ3MubWFwKGMgPT4gYy5rZXkpKTtcclxuXHJcbiAgLy8g5Y+q5Yib5bu65LiN5a2Y5Zyo55qE6YWN572uXHJcbiAgY29uc3QgbmV3Q29uZmlncyA9IGNvbmZpZ3MuZmlsdGVyKGMgPT4gIWV4aXN0aW5nS2V5cy5oYXMoYy5rZXkpKTtcclxuICBpZiAobmV3Q29uZmlncy5sZW5ndGggPiAwKSB7XHJcbiAgICBhd2FpdCBwcmlzbWEuY29uZmlnLmNyZWF0ZU1hbnkoe1xyXG4gICAgICBkYXRhOiBuZXdDb25maWdzXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxufSJdLCJuYW1lcyI6WyJwcmlzbWEiLCJyZWdpc3RlciIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1JVTlRJTUUiLCJpbml0RGF0YWJhc2UiLCJjb25maWdzIiwia2V5IiwidmFsdWUiLCJleGlzdGluZ0NvbmZpZ3MiLCJjb25maWciLCJmaW5kTWFueSIsIndoZXJlIiwiaW4iLCJtYXAiLCJjIiwiZXhpc3RpbmdLZXlzIiwiU2V0IiwibmV3Q29uZmlncyIsImZpbHRlciIsImhhcyIsImxlbmd0aCIsImNyZWF0ZU1hbnkiLCJkYXRhIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(instrument)/./instrumentation.ts\n");

/***/ }),

/***/ "(instrument)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGluc3RydW1lbnQpLy4vbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFDOUMsTUFBTUMsU0FBUyxJQUFJRCx3REFBWUEsQ0FBQyxDQUNoQztBQUNBLGlFQUFlQyxNQUFNQSxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEFkbWluaXN0cmF0b3JcXERlc2t0b3BcXGt1bmdhbFxcbGliXFxwcmlzbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xyXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KHtcclxufSlcclxuZXhwb3J0IGRlZmF1bHQgcHJpc21hOyJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJwcmlzbWEiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(instrument)/./lib/prisma.ts\n");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("./webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(instrument)/./instrumentation.ts"));
module.exports = __webpack_exports__;

})();